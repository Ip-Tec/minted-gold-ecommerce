"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/products";
exports.ids = ["pages/api/products"];
exports.modules = {

/***/ "@next-auth/prisma-adapter":
/*!********************************************!*\
  !*** external "@next-auth/prisma-adapter" ***!
  \********************************************/
/***/ ((module) => {

module.exports = require("@next-auth/prisma-adapter");

/***/ }),

/***/ "@prisma/client":
/*!*********************************!*\
  !*** external "@prisma/client" ***!
  \*********************************/
/***/ ((module) => {

module.exports = require("@prisma/client");

/***/ }),

/***/ "next-auth":
/*!****************************!*\
  !*** external "next-auth" ***!
  \****************************/
/***/ ((module) => {

module.exports = require("next-auth");

/***/ }),

/***/ "next-auth/providers/credentials":
/*!**************************************************!*\
  !*** external "next-auth/providers/credentials" ***!
  \**************************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/credentials");

/***/ }),

/***/ "next-auth/providers/github":
/*!*********************************************!*\
  !*** external "next-auth/providers/github" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/github");

/***/ }),

/***/ "next-auth/providers/google":
/*!*********************************************!*\
  !*** external "next-auth/providers/google" ***!
  \*********************************************/
/***/ ((module) => {

module.exports = require("next-auth/providers/google");

/***/ }),

/***/ "(api)/./pages/api/auth/[...nextauth].js":
/*!*****************************************!*\
  !*** ./pages/api/auth/[...nextauth].js ***!
  \*****************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"authOptions\": () => (/* binding */ authOptions),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   \"isAdminRequest\": () => (/* binding */ isAdminRequest)\n/* harmony export */ });\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next-auth/providers/credentials */ \"next-auth/providers/credentials\");\n/* harmony import */ var next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @next-auth/prisma-adapter */ \"@next-auth/prisma-adapter\");\n/* harmony import */ var _next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next-auth/providers/google */ \"next-auth/providers/google\");\n/* harmony import */ var next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next-auth/providers/github */ \"next-auth/providers/github\");\n/* harmony import */ var next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next-auth */ \"next-auth\");\n/* harmony import */ var next_auth__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_auth__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_5__);\n// next-auth.js\n\n\n\n\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_5__.PrismaClient();\nconst adminEmails = [\n    \"peter@gmail.com\",\n    \"otakhorpeter@gmail.com\",\n    \"peterotakhor@gmail.com\",\n    \"peterotakhor2018@gmail.com\"\n];\nconst authOptions = {\n    secret: process.env.NEXTAUTH_SECRET,\n    providers: [\n        next_auth_providers_google__WEBPACK_IMPORTED_MODULE_2___default()({\n            timeout: 15000,\n            clientId: process.env.GOOGLE_ID,\n            clientSecret: process.env.GOOGLE_SECRET\n        }),\n        next_auth_providers_github__WEBPACK_IMPORTED_MODULE_3___default()({\n            clientId: process.env.GITHUB_ID,\n            clientSecret: process.env.GITHUB_SECRET\n        }),\n        next_auth_providers_credentials__WEBPACK_IMPORTED_MODULE_0___default()({\n            credentials: {\n                email: {\n                    label: \"Email\",\n                    type: \"email\"\n                }\n            },\n            async authorize (credentials, req) {\n                console.log(\"Authorize credentials:\", credentials);\n                const adminData = await prisma.admin.findFirst({\n                    where: {\n                        email: credentials.email\n                    }\n                });\n                if (adminData && credentials?.email === adminData.email) {\n                    console.log(\"User is an admin:\", adminData);\n                    const admin = {\n                        id: adminData.id?.toString() || \"\",\n                        username: adminData.username,\n                        email: adminData.email\n                    };\n                    return Promise.resolve(admin); // Return the user data to let NextAuth.js handle the session creation\n                } else {\n                    console.log(\"User is not an admin:\", adminData);\n                    return Promise.resolve(null); // Returning null indicates authentication failure\n                }\n            }\n        })\n    ],\n    session: {\n        strategy: \"jwt\"\n    },\n    jwt: {\n        secret: process.env.NEXTAUTH_SECRET\n    },\n    adapter: (0,_next_auth_prisma_adapter__WEBPACK_IMPORTED_MODULE_1__.PrismaAdapter)(prisma),\n    callbacks: {\n        session: async ({ session , token  })=>{\n            console.log(\"session_NEXTAUTH\", session);\n            console.log(\"token_NEXTAUTH\", token);\n            // Check if the user is an admin\n            const isAdmin = session?.admin;\n            return Promise.resolve({\n                ...session,\n                admin: isAdmin ? {\n                    id: isAdmin.id,\n                    username: isAdmin.username,\n                    email: isAdmin.email,\n                    token\n                } : null\n            });\n        }\n    }\n};\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (next_auth__WEBPACK_IMPORTED_MODULE_4___default()(authOptions));\nasync function isAdminRequest(req, res) {\n    try {\n        const session = await (0,next_auth__WEBPACK_IMPORTED_MODULE_4__.getServerSession)(req, res, authOptions);\n        console.log(\"isAdminRequest session:\", session);\n        // Uncomment the following lines if you want to restrict access to admins\n        if (!adminEmails.includes(session?.user?.email)) {\n            res.status(401);\n            res.end();\n            throw new Error(\"User not authorized\");\n        }\n        return session;\n    // Continue with other logic for admin requests\n    } catch (error) {\n        console.error(\"isAdminRequest error:\", error);\n        res.status(500).json({\n            error: \"Internal server error\"\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvYXV0aC9bLi4ubmV4dGF1dGhdLmpzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBLGVBQWU7QUFFbUQ7QUFDUjtBQUNGO0FBQ0E7QUFDRDtBQUNUO0FBRTlDLE1BQU1PLFNBQVMsSUFBSUQsd0RBQVlBO0FBRS9CLE1BQU1FLGNBQWM7SUFDbEI7SUFDQTtJQUNBO0lBQ0E7Q0FDRDtBQUVNLE1BQU1DLGNBQWM7SUFDekJDLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUNuQ0MsV0FBVztRQUNUWixpRUFBY0EsQ0FBQztZQUNiYSxTQUFTO1lBQ1RDLFVBQVVMLFFBQVFDLEdBQUcsQ0FBQ0ssU0FBUztZQUMvQkMsY0FBY1AsUUFBUUMsR0FBRyxDQUFDTyxhQUFhO1FBQ3pDO1FBQ0FoQixpRUFBY0EsQ0FBQztZQUNiYSxVQUFVTCxRQUFRQyxHQUFHLENBQUNRLFNBQVM7WUFDL0JGLGNBQWNQLFFBQVFDLEdBQUcsQ0FBQ1MsYUFBYTtRQUN6QztRQUNBckIsc0VBQW1CQSxDQUFDO1lBQ2xCc0IsYUFBYTtnQkFDWEMsT0FBTztvQkFBRUMsT0FBTztvQkFBU0MsTUFBTTtnQkFBUTtZQUN6QztZQUNBLE1BQU1DLFdBQVVKLFdBQVcsRUFBRUssR0FBRyxFQUFFO2dCQUNoQ0MsUUFBUUMsR0FBRyxDQUFDLDBCQUEwQlA7Z0JBQ3RDLE1BQU1RLFlBQVksTUFBTXZCLE9BQU93QixLQUFLLENBQUNDLFNBQVMsQ0FBQztvQkFDN0NDLE9BQU87d0JBQ0xWLE9BQU9ELFlBQVlDLEtBQUs7b0JBQzFCO2dCQUNGO2dCQUVBLElBQUlPLGFBQWFSLGFBQWFDLFVBQVVPLFVBQVVQLEtBQUssRUFBRTtvQkFDdkRLLFFBQVFDLEdBQUcsQ0FBQyxxQkFBcUJDO29CQUNqQyxNQUFNQyxRQUFRO3dCQUNaRyxJQUFJSixVQUFVSSxFQUFFLEVBQUVDLGNBQWM7d0JBQ2hDQyxVQUFVTixVQUFVTSxRQUFRO3dCQUM1QmIsT0FBT08sVUFBVVAsS0FBSztvQkFDeEI7b0JBRUEsT0FBT2MsUUFBUUMsT0FBTyxDQUFDUCxRQUFRLHNFQUFzRTtnQkFDdkcsT0FBTztvQkFDTEgsUUFBUUMsR0FBRyxDQUFDLHlCQUF5QkM7b0JBQ3JDLE9BQU9PLFFBQVFDLE9BQU8sQ0FBQyxJQUFJLEdBQUcsa0RBQWtEO2dCQUNsRixDQUFDO1lBQ0g7UUFDRjtLQUNEO0lBQ0RDLFNBQVM7UUFDUEMsVUFBVTtJQUNaO0lBQ0FDLEtBQUs7UUFDSC9CLFFBQVFDLFFBQVFDLEdBQUcsQ0FBQ0MsZUFBZTtJQUNyQztJQUNBNkIsU0FBU3pDLHdFQUFhQSxDQUFDTTtJQUN2Qm9DLFdBQVc7UUFDVEosU0FBUyxPQUFPLEVBQUVBLFFBQU8sRUFBRUssTUFBSyxFQUFFLEdBQUs7WUFDckNoQixRQUFRQyxHQUFHLENBQUMsb0JBQW9CVTtZQUNoQ1gsUUFBUUMsR0FBRyxDQUFDLGtCQUFrQmU7WUFFOUIsZ0NBQWdDO1lBQ2hDLE1BQU1DLFVBQVVOLFNBQVNSO1lBRXpCLE9BQU9NLFFBQVFDLE9BQU8sQ0FBQztnQkFDckIsR0FBR0MsT0FBTztnQkFDVlIsT0FBT2MsVUFDSDtvQkFDRVgsSUFBSVcsUUFBUVgsRUFBRTtvQkFDZEUsVUFBVVMsUUFBUVQsUUFBUTtvQkFDMUJiLE9BQU9zQixRQUFRdEIsS0FBSztvQkFDcEJxQjtnQkFFRixJQUNBLElBQUk7WUFDVjtRQUNGO0lBQ0Y7QUFFRixFQUFFO0FBRUYsaUVBQWV4QyxnREFBUUEsQ0FBQ0ssWUFBWUEsRUFBQztBQUU5QixlQUFlcUMsZUFBZW5CLEdBQUcsRUFBRW9CLEdBQUcsRUFBRTtJQUM3QyxJQUFJO1FBQ0YsTUFBTVIsVUFBVSxNQUFNbEMsMkRBQWdCQSxDQUFDc0IsS0FBS29CLEtBQUt0QztRQUNqRG1CLFFBQVFDLEdBQUcsQ0FBQywyQkFBMkJVO1FBRXZDLHlFQUF5RTtRQUN6RSxJQUFJLENBQUMvQixZQUFZd0MsUUFBUSxDQUFDVCxTQUFTVSxNQUFNMUIsUUFBUTtZQUMvQ3dCLElBQUlHLE1BQU0sQ0FBQztZQUNYSCxJQUFJSSxHQUFHO1lBQ1AsTUFBTSxJQUFJQyxNQUFNLHVCQUF1QjtRQUN6QyxDQUFDO1FBQ0QsT0FBT2I7SUFDUCwrQ0FBK0M7SUFDakQsRUFBRSxPQUFPYyxPQUFPO1FBQ2R6QixRQUFReUIsS0FBSyxDQUFDLHlCQUF5QkE7UUFDdkNOLElBQUlHLE1BQU0sQ0FBQyxLQUFLSSxJQUFJLENBQUM7WUFBRUQsT0FBTztRQUF3QjtJQUN4RDtBQUNGLENBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9taW50ZWQtZ29sZC1hZG1pbi8uL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF0uanM/NTI3ZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBuZXh0LWF1dGguanNcclxuXHJcbmltcG9ydCBDcmVkZW50aWFsc1Byb3ZpZGVyIGZyb20gXCJuZXh0LWF1dGgvcHJvdmlkZXJzL2NyZWRlbnRpYWxzXCI7XHJcbmltcG9ydCB7IFByaXNtYUFkYXB0ZXIgfSBmcm9tIFwiQG5leHQtYXV0aC9wcmlzbWEtYWRhcHRlclwiO1xyXG5pbXBvcnQgR29vZ2xlUHJvdmlkZXIgZnJvbSBcIm5leHQtYXV0aC9wcm92aWRlcnMvZ29vZ2xlXCI7XHJcbmltcG9ydCBHaXRIdWJQcm92aWRlciBmcm9tIFwibmV4dC1hdXRoL3Byb3ZpZGVycy9naXRodWJcIjtcclxuaW1wb3J0IE5leHRBdXRoLCB7IGdldFNlcnZlclNlc3Npb24gfSBmcm9tIFwibmV4dC1hdXRoXCI7XHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xyXG5cclxuY29uc3QgcHJpc21hID0gbmV3IFByaXNtYUNsaWVudCgpO1xyXG5cclxuY29uc3QgYWRtaW5FbWFpbHMgPSBbXHJcbiAgXCJwZXRlckBnbWFpbC5jb21cIixcclxuICBcIm90YWtob3JwZXRlckBnbWFpbC5jb21cIixcclxuICBcInBldGVyb3Rha2hvckBnbWFpbC5jb21cIixcclxuICBcInBldGVyb3Rha2hvcjIwMThAZ21haWwuY29tXCIsXHJcbl07XHJcblxyXG5leHBvcnQgY29uc3QgYXV0aE9wdGlvbnMgPSB7XHJcbiAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXHJcbiAgcHJvdmlkZXJzOiBbXHJcbiAgICBHb29nbGVQcm92aWRlcih7XHJcbiAgICAgIHRpbWVvdXQ6IDE1MDAwLFxyXG4gICAgICBjbGllbnRJZDogcHJvY2Vzcy5lbnYuR09PR0xFX0lELFxyXG4gICAgICBjbGllbnRTZWNyZXQ6IHByb2Nlc3MuZW52LkdPT0dMRV9TRUNSRVQsXHJcbiAgICB9KSxcclxuICAgIEdpdEh1YlByb3ZpZGVyKHtcclxuICAgICAgY2xpZW50SWQ6IHByb2Nlc3MuZW52LkdJVEhVQl9JRCxcclxuICAgICAgY2xpZW50U2VjcmV0OiBwcm9jZXNzLmVudi5HSVRIVUJfU0VDUkVULFxyXG4gICAgfSksXHJcbiAgICBDcmVkZW50aWFsc1Byb3ZpZGVyKHtcclxuICAgICAgY3JlZGVudGlhbHM6IHtcclxuICAgICAgICBlbWFpbDogeyBsYWJlbDogXCJFbWFpbFwiLCB0eXBlOiBcImVtYWlsXCIgfSxcclxuICAgICAgfSxcclxuICAgICAgYXN5bmMgYXV0aG9yaXplKGNyZWRlbnRpYWxzLCByZXEpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIkF1dGhvcml6ZSBjcmVkZW50aWFsczpcIiwgY3JlZGVudGlhbHMpO1xyXG4gICAgICAgIGNvbnN0IGFkbWluRGF0YSA9IGF3YWl0IHByaXNtYS5hZG1pbi5maW5kRmlyc3Qoe1xyXG4gICAgICAgICAgd2hlcmU6IHtcclxuICAgICAgICAgICAgZW1haWw6IGNyZWRlbnRpYWxzLmVtYWlsLFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKGFkbWluRGF0YSAmJiBjcmVkZW50aWFscz8uZW1haWwgPT09IGFkbWluRGF0YS5lbWFpbCkge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGlzIGFuIGFkbWluOlwiLCBhZG1pbkRhdGEpO1xyXG4gICAgICAgICAgY29uc3QgYWRtaW4gPSB7XHJcbiAgICAgICAgICAgIGlkOiBhZG1pbkRhdGEuaWQ/LnRvU3RyaW5nKCkgfHwgXCJcIixcclxuICAgICAgICAgICAgdXNlcm5hbWU6IGFkbWluRGF0YS51c2VybmFtZSxcclxuICAgICAgICAgICAgZW1haWw6IGFkbWluRGF0YS5lbWFpbCxcclxuICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShhZG1pbik7IC8vIFJldHVybiB0aGUgdXNlciBkYXRhIHRvIGxldCBOZXh0QXV0aC5qcyBoYW5kbGUgdGhlIHNlc3Npb24gY3JlYXRpb25cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJVc2VyIGlzIG5vdCBhbiBhZG1pbjpcIiwgYWRtaW5EYXRhKTtcclxuICAgICAgICAgIHJldHVybiBQcm9taXNlLnJlc29sdmUobnVsbCk7IC8vIFJldHVybmluZyBudWxsIGluZGljYXRlcyBhdXRoZW50aWNhdGlvbiBmYWlsdXJlXHJcbiAgICAgICAgfVxyXG4gICAgICB9LFxyXG4gICAgfSksXHJcbiAgXSxcclxuICBzZXNzaW9uOiB7XHJcbiAgICBzdHJhdGVneTogXCJqd3RcIixcclxuICB9LFxyXG4gIGp3dDoge1xyXG4gICAgc2VjcmV0OiBwcm9jZXNzLmVudi5ORVhUQVVUSF9TRUNSRVQsXHJcbiAgfSxcclxuICBhZGFwdGVyOiBQcmlzbWFBZGFwdGVyKHByaXNtYSksXHJcbiAgY2FsbGJhY2tzOiB7XHJcbiAgICBzZXNzaW9uOiBhc3luYyAoeyBzZXNzaW9uLCB0b2tlbiB9KSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwic2Vzc2lvbl9ORVhUQVVUSFwiLCBzZXNzaW9uKTtcclxuICAgICAgY29uc29sZS5sb2coXCJ0b2tlbl9ORVhUQVVUSFwiLCB0b2tlbik7XHJcbiAgXHJcbiAgICAgIC8vIENoZWNrIGlmIHRoZSB1c2VyIGlzIGFuIGFkbWluXHJcbiAgICAgIGNvbnN0IGlzQWRtaW4gPSBzZXNzaW9uPy5hZG1pbjtcclxuICBcclxuICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh7XHJcbiAgICAgICAgLi4uc2Vzc2lvbixcclxuICAgICAgICBhZG1pbjogaXNBZG1pblxyXG4gICAgICAgICAgPyB7XHJcbiAgICAgICAgICAgICAgaWQ6IGlzQWRtaW4uaWQsXHJcbiAgICAgICAgICAgICAgdXNlcm5hbWU6IGlzQWRtaW4udXNlcm5hbWUsXHJcbiAgICAgICAgICAgICAgZW1haWw6IGlzQWRtaW4uZW1haWwsXHJcbiAgICAgICAgICAgICAgdG9rZW4sXHJcbiAgICAgICAgICAgICAgLy8gT3RoZXIgcHJvcGVydGllc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICA6IG51bGwsXHJcbiAgICAgIH0pO1xyXG4gICAgfSxcclxuICB9LFxyXG4gIFxyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgTmV4dEF1dGgoYXV0aE9wdGlvbnMpO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGlzQWRtaW5SZXF1ZXN0KHJlcSwgcmVzKSB7XHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHNlc3Npb24gPSBhd2FpdCBnZXRTZXJ2ZXJTZXNzaW9uKHJlcSwgcmVzLCBhdXRoT3B0aW9ucyk7XHJcbiAgICBjb25zb2xlLmxvZyhcImlzQWRtaW5SZXF1ZXN0IHNlc3Npb246XCIsIHNlc3Npb24pO1xyXG5cclxuICAgIC8vIFVuY29tbWVudCB0aGUgZm9sbG93aW5nIGxpbmVzIGlmIHlvdSB3YW50IHRvIHJlc3RyaWN0IGFjY2VzcyB0byBhZG1pbnNcclxuICAgIGlmICghYWRtaW5FbWFpbHMuaW5jbHVkZXMoc2Vzc2lvbj8udXNlcj8uZW1haWwpKSB7XHJcbiAgICAgIHJlcy5zdGF0dXMoNDAxKTtcclxuICAgICAgcmVzLmVuZCgpO1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXCJVc2VyIG5vdCBhdXRob3JpemVkXCIpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHNlc3Npb247XHJcbiAgICAvLyBDb250aW51ZSB3aXRoIG90aGVyIGxvZ2ljIGZvciBhZG1pbiByZXF1ZXN0c1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKFwiaXNBZG1pblJlcXVlc3QgZXJyb3I6XCIsIGVycm9yKTtcclxuICAgIHJlcy5zdGF0dXMoNTAwKS5qc29uKHsgZXJyb3I6IFwiSW50ZXJuYWwgc2VydmVyIGVycm9yXCIgfSk7XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJDcmVkZW50aWFsc1Byb3ZpZGVyIiwiUHJpc21hQWRhcHRlciIsIkdvb2dsZVByb3ZpZGVyIiwiR2l0SHViUHJvdmlkZXIiLCJOZXh0QXV0aCIsImdldFNlcnZlclNlc3Npb24iLCJQcmlzbWFDbGllbnQiLCJwcmlzbWEiLCJhZG1pbkVtYWlscyIsImF1dGhPcHRpb25zIiwic2VjcmV0IiwicHJvY2VzcyIsImVudiIsIk5FWFRBVVRIX1NFQ1JFVCIsInByb3ZpZGVycyIsInRpbWVvdXQiLCJjbGllbnRJZCIsIkdPT0dMRV9JRCIsImNsaWVudFNlY3JldCIsIkdPT0dMRV9TRUNSRVQiLCJHSVRIVUJfSUQiLCJHSVRIVUJfU0VDUkVUIiwiY3JlZGVudGlhbHMiLCJlbWFpbCIsImxhYmVsIiwidHlwZSIsImF1dGhvcml6ZSIsInJlcSIsImNvbnNvbGUiLCJsb2ciLCJhZG1pbkRhdGEiLCJhZG1pbiIsImZpbmRGaXJzdCIsIndoZXJlIiwiaWQiLCJ0b1N0cmluZyIsInVzZXJuYW1lIiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXNzaW9uIiwic3RyYXRlZ3kiLCJqd3QiLCJhZGFwdGVyIiwiY2FsbGJhY2tzIiwidG9rZW4iLCJpc0FkbWluIiwiaXNBZG1pblJlcXVlc3QiLCJyZXMiLCJpbmNsdWRlcyIsInVzZXIiLCJzdGF0dXMiLCJlbmQiLCJFcnJvciIsImVycm9yIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/auth/[...nextauth].js\n");

/***/ }),

/***/ "(api)/./pages/api/products.js":
/*!*******************************!*\
  !*** ./pages/api/products.js ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handle)\n/* harmony export */ });\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @prisma/client */ \"@prisma/client\");\n/* harmony import */ var _prisma_client__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_prisma_client__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/pages/api/auth/[...nextauth] */ \"(api)/./pages/api/auth/[...nextauth].js\");\n// pages/api/product.js\n\n\nconst prisma = new _prisma_client__WEBPACK_IMPORTED_MODULE_0__.PrismaClient();\nasync function handle(req, res) {\n    const { method  } = req;\n    await (0,_pages_api_auth_nextauth___WEBPACK_IMPORTED_MODULE_1__.isAdminRequest)(req, res);\n    if (method === \"GET\") {\n        if (req.query?.id) {\n            const product = await prisma.product.findUnique({\n                where: {\n                    id: req.query.id\n                }\n            });\n            res.json(product);\n        } else {\n            const products = await prisma.product.findMany();\n            res.json(products);\n        }\n    }\n    if (method === \"POST\") {\n        const { title , description , price , images , category , properties  } = req.body;\n        const product = await prisma.product.create({\n            data: {\n                title,\n                description,\n                price,\n                images,\n                category,\n                properties\n            }\n        });\n        res.json(product);\n    }\n    if (method === \"PUT\") {\n        const { title , description , price , images , category , properties , id  } = req.body;\n        await prisma.product.update({\n            where: {\n                id\n            },\n            data: {\n                title,\n                description,\n                price,\n                images,\n                category,\n                properties,\n                updatedAt: new Date()\n            }\n        });\n        res.json(true);\n    }\n    if (method === \"DELETE\") {\n        if (req.query?.id) {\n            await prisma.product.delete({\n                where: {\n                    id: req.query.id\n                }\n            });\n            res.json(true);\n        }\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9wYWdlcy9hcGkvcHJvZHVjdHMuanMuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUFBLHVCQUF1QjtBQUV1QjtBQUNrQjtBQUVoRSxNQUFNRSxTQUFTLElBQUlGLHdEQUFZQTtBQUVoQixlQUFlRyxPQUFPQyxHQUFHLEVBQUVDLEdBQUcsRUFBRTtJQUM3QyxNQUFNLEVBQUVDLE9BQU0sRUFBRSxHQUFHRjtJQUVuQixNQUFNSCx5RUFBY0EsQ0FBQ0csS0FBS0M7SUFFMUIsSUFBSUMsV0FBVyxPQUFPO1FBQ3BCLElBQUlGLElBQUlHLEtBQUssRUFBRUMsSUFBSTtZQUNqQixNQUFNQyxVQUFVLE1BQU1QLE9BQU9PLE9BQU8sQ0FBQ0MsVUFBVSxDQUFDO2dCQUM5Q0MsT0FBTztvQkFBRUgsSUFBSUosSUFBSUcsS0FBSyxDQUFDQyxFQUFFO2dCQUFDO1lBQzVCO1lBQ0FILElBQUlPLElBQUksQ0FBQ0g7UUFDWCxPQUFPO1lBQ0wsTUFBTUksV0FBVyxNQUFNWCxPQUFPTyxPQUFPLENBQUNLLFFBQVE7WUFDOUNULElBQUlPLElBQUksQ0FBQ0M7UUFDWCxDQUFDO0lBQ0gsQ0FBQztJQUVELElBQUlQLFdBQVcsUUFBUTtRQUNyQixNQUFNLEVBQUVTLE1BQUssRUFBRUMsWUFBVyxFQUFFQyxNQUFLLEVBQUVDLE9BQU0sRUFBRUMsU0FBUSxFQUFFQyxXQUFVLEVBQUUsR0FDL0RoQixJQUFJaUIsSUFBSTtRQUNWLE1BQU1aLFVBQVUsTUFBTVAsT0FBT08sT0FBTyxDQUFDYSxNQUFNLENBQUM7WUFDMUNDLE1BQU07Z0JBQ0pSO2dCQUNBQztnQkFDQUM7Z0JBQ0FDO2dCQUNBQztnQkFDQUM7WUFDRjtRQUNGO1FBQ0FmLElBQUlPLElBQUksQ0FBQ0g7SUFDWCxDQUFDO0lBRUQsSUFBSUgsV0FBVyxPQUFPO1FBQ3BCLE1BQU0sRUFBRVMsTUFBSyxFQUFFQyxZQUFXLEVBQUVDLE1BQUssRUFBRUMsT0FBTSxFQUFFQyxTQUFRLEVBQUVDLFdBQVUsRUFBRVosR0FBRSxFQUFFLEdBQ25FSixJQUFJaUIsSUFBSTtRQUNWLE1BQU1uQixPQUFPTyxPQUFPLENBQUNlLE1BQU0sQ0FBQztZQUMxQmIsT0FBTztnQkFBRUg7WUFBRztZQUNaZSxNQUFNO2dCQUNKUjtnQkFDQUM7Z0JBQ0FDO2dCQUNBQztnQkFDQUM7Z0JBQ0FDO2dCQUNBSyxXQUFXLElBQUlDO1lBQ2pCO1FBQ0Y7UUFDQXJCLElBQUlPLElBQUksQ0FBQyxJQUFJO0lBQ2YsQ0FBQztJQUVELElBQUlOLFdBQVcsVUFBVTtRQUN2QixJQUFJRixJQUFJRyxLQUFLLEVBQUVDLElBQUk7WUFDakIsTUFBTU4sT0FBT08sT0FBTyxDQUFDa0IsTUFBTSxDQUFDO2dCQUMxQmhCLE9BQU87b0JBQUVILElBQUlKLElBQUlHLEtBQUssQ0FBQ0MsRUFBRTtnQkFBQztZQUM1QjtZQUNBSCxJQUFJTyxJQUFJLENBQUMsSUFBSTtRQUNmLENBQUM7SUFDSCxDQUFDO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL21pbnRlZC1nb2xkLWFkbWluLy4vcGFnZXMvYXBpL3Byb2R1Y3RzLmpzPzQ5Y2IiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gcGFnZXMvYXBpL3Byb2R1Y3QuanNcclxuXHJcbmltcG9ydCB7IFByaXNtYUNsaWVudCB9IGZyb20gXCJAcHJpc21hL2NsaWVudFwiO1xyXG5pbXBvcnQgeyBpc0FkbWluUmVxdWVzdCB9IGZyb20gXCJAL3BhZ2VzL2FwaS9hdXRoL1suLi5uZXh0YXV0aF1cIjtcclxuXHJcbmNvbnN0IHByaXNtYSA9IG5ldyBQcmlzbWFDbGllbnQoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZShyZXEsIHJlcykge1xyXG4gIGNvbnN0IHsgbWV0aG9kIH0gPSByZXE7XHJcblxyXG4gIGF3YWl0IGlzQWRtaW5SZXF1ZXN0KHJlcSwgcmVzKTtcclxuXHJcbiAgaWYgKG1ldGhvZCA9PT0gXCJHRVRcIikge1xyXG4gICAgaWYgKHJlcS5xdWVyeT8uaWQpIHtcclxuICAgICAgY29uc3QgcHJvZHVjdCA9IGF3YWl0IHByaXNtYS5wcm9kdWN0LmZpbmRVbmlxdWUoe1xyXG4gICAgICAgIHdoZXJlOiB7IGlkOiByZXEucXVlcnkuaWQgfSxcclxuICAgICAgfSk7XHJcbiAgICAgIHJlcy5qc29uKHByb2R1Y3QpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgY29uc3QgcHJvZHVjdHMgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5maW5kTWFueSgpO1xyXG4gICAgICByZXMuanNvbihwcm9kdWN0cyk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBpZiAobWV0aG9kID09PSBcIlBPU1RcIikge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaWNlLCBpbWFnZXMsIGNhdGVnb3J5LCBwcm9wZXJ0aWVzIH0gPVxyXG4gICAgICByZXEuYm9keTtcclxuICAgIGNvbnN0IHByb2R1Y3QgPSBhd2FpdCBwcmlzbWEucHJvZHVjdC5jcmVhdGUoe1xyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgaW1hZ2VzLFxyXG4gICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgIHByb3BlcnRpZXMsXHJcbiAgICAgIH0sXHJcbiAgICB9KTtcclxuICAgIHJlcy5qc29uKHByb2R1Y3QpO1xyXG4gIH1cclxuXHJcbiAgaWYgKG1ldGhvZCA9PT0gXCJQVVRcIikge1xyXG4gICAgY29uc3QgeyB0aXRsZSwgZGVzY3JpcHRpb24sIHByaWNlLCBpbWFnZXMsIGNhdGVnb3J5LCBwcm9wZXJ0aWVzLCBpZCB9ID1cclxuICAgICAgcmVxLmJvZHk7XHJcbiAgICBhd2FpdCBwcmlzbWEucHJvZHVjdC51cGRhdGUoe1xyXG4gICAgICB3aGVyZTogeyBpZCB9LFxyXG4gICAgICBkYXRhOiB7XHJcbiAgICAgICAgdGl0bGUsXHJcbiAgICAgICAgZGVzY3JpcHRpb24sXHJcbiAgICAgICAgcHJpY2UsXHJcbiAgICAgICAgaW1hZ2VzLFxyXG4gICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgIHByb3BlcnRpZXMsXHJcbiAgICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxyXG4gICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICByZXMuanNvbih0cnVlKTtcclxuICB9XHJcblxyXG4gIGlmIChtZXRob2QgPT09IFwiREVMRVRFXCIpIHtcclxuICAgIGlmIChyZXEucXVlcnk/LmlkKSB7XHJcbiAgICAgIGF3YWl0IHByaXNtYS5wcm9kdWN0LmRlbGV0ZSh7XHJcbiAgICAgICAgd2hlcmU6IHsgaWQ6IHJlcS5xdWVyeS5pZCB9LFxyXG4gICAgICB9KTtcclxuICAgICAgcmVzLmpzb24odHJ1ZSk7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJQcmlzbWFDbGllbnQiLCJpc0FkbWluUmVxdWVzdCIsInByaXNtYSIsImhhbmRsZSIsInJlcSIsInJlcyIsIm1ldGhvZCIsInF1ZXJ5IiwiaWQiLCJwcm9kdWN0IiwiZmluZFVuaXF1ZSIsIndoZXJlIiwianNvbiIsInByb2R1Y3RzIiwiZmluZE1hbnkiLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwicHJpY2UiLCJpbWFnZXMiLCJjYXRlZ29yeSIsInByb3BlcnRpZXMiLCJib2R5IiwiY3JlYXRlIiwiZGF0YSIsInVwZGF0ZSIsInVwZGF0ZWRBdCIsIkRhdGUiLCJkZWxldGUiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/products.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = (__webpack_exec__("(api)/./pages/api/products.js"));
module.exports = __webpack_exports__;

})();